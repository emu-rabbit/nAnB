(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a5ed6dd"],{"18d5":function(e,t,n){e.exports=n.p+"static/img/user.1ad76388.jpg"},"293a":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),r=n("47e2"),s=["src"],c={name:"Message",props:{from:{type:String,default:"bot"},messages:{type:Array,required:!0}},setup:function(e){var t=Object(r["b"])(),c=t.t;return function(t,r){return Object(a["v"])(),Object(a["f"])("div",{class:Object(a["p"])(t.$style.container)},[Object(a["g"])("div",{class:Object(a["p"])(t.$style.left)},[Object(a["g"])("img",{class:Object(a["p"])(t.$style.img),src:n("710a")("./".concat(e.from,".jpg"))},null,10,s)],2),Object(a["g"])("div",{class:Object(a["p"])(t.$style.right)},[Object(a["g"])("div",null,Object(a["C"])(Object(a["D"])(c)("".concat(e.from,"_name"))),1),(Object(a["v"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(e.messages,(function(e,n){return Object(a["v"])(),Object(a["f"])("div",{class:Object(a["p"])(t.$style.message),key:n},Object(a["C"])(e),3)})),128))],2)],2)}}},u=n("437f"),i=n("6b0d"),o=n.n(i);const l={};l["$style"]=u["default"];const p=o()(c,[["__cssModules",l]]);var b=p,h={name:"ChatBox",emits:["user-message"],setup:function(e,t){var n=t.expose,s=t.emit,c=Object(r["b"])(),u=c.t,i=Object(a["y"])(!1),o=function(){i.value=!0},l=Object(a["y"])(!0),p=function(){f.value&&(f.value.scrollTo(0,0),l.value=!0)},h=Object(a["x"])([]),f=Object(a["y"])(null),v=function(e,t){h[0]&&h[0].from===e&&!i.value?h[0].message.push(t):(h.unshift({from:e,message:[t]}),i.value&&(i.value=!1)),Object(a["o"])((function(){p(),f.value&&f.value.scrollTop<0&&(l.value=!1)}))},j=Object(a["y"])(!1),O=function(e){j.value=e},g=Object(a["y"])(null),d=function(){g.value&&g.value.value&&(s("user-message",g.value.value),g.value.value="")};return n({newMessage:v,markWriting:O,markSection:o}),function(e,t){return Object(a["v"])(),Object(a["f"])("div",{class:Object(a["p"])(e.$style.container)},[Object(a["G"])(Object(a["g"])("div",{class:Object(a["p"])(e.$style.new),onClick:p},[Object(a["g"])("span",null,Object(a["C"])(Object(a["D"])(u)("new_message")),1),Object(a["g"])("span",null,Object(a["C"])(Object(a["D"])(u)("mark_read")),1)],2),[[a["E"],!l.value]]),Object(a["g"])("div",{ref_key:"messageEl",ref:f,class:Object(a["p"])(e.$style.message)},[(Object(a["v"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(h,(function(e,t){return Object(a["v"])(),Object(a["e"])(b,{key:t,from:e.from,messages:e.message},null,8,["from","messages"])})),128))],2),Object(a["g"])("div",{class:Object(a["p"])(e.$style.controls)},[Object(a["g"])("span",{class:Object(a["p"])(e.$style.writing),style:Object(a["q"])({visibility:j.value?"visible":"hidden"})},Object(a["C"])(Object(a["D"])(u)("bot_is_writing")),7),Object(a["g"])("input",{ref_key:"input",ref:g,class:Object(a["p"])(e.$style.input),onKeydown:t[0]||(t[0]=Object(a["H"])((function(e){return d()}),["enter"]))},null,34),Object(a["g"])("button",{class:Object(a["p"])(e.$style.btn),onClick:t[1]||(t[1]=function(e){return d()})},"送出",2)],2)],2)}}},f=n("9550");const v={};v["$style"]=f["default"];const j=o()(h,[["__cssModules",v]]);var O=j,g=n("c7eb"),d=n("1da1"),k=n("d4ec"),m=n("bee2"),w=n("ade3"),y=(n("ac1f"),n("00b4"),n("99af"),n("d3b7"),n("9225"));n("159b"),n("a15b"),n("4de4"),n("d9e2"),n("5319");function x(e,t){for(var n=["-","-","-","-","-"],a=0,r=0,s=0;s<=e.length-1;s++){var c=e.indexOf(t[s]);-1!==c&&(n[c]="B",r++)}for(var u=0;u<=e.length-1;u++)e[u]===t[u]&&(n[u]="A",a++,r--);return{a:a,b:r,pattern:n.join("")}}var _=function(){function e(t){Object(k["a"])(this,e),this.n=t,this.pool=[],this.initPool(),this.history=[]}return Object(m["a"])(e,[{key:"initPool",value:function(){var e=this,t=function t(n,a,r){1===n?a.forEach((function(t){e.pool.push(r.concat(t).join(""))})):a.forEach((function(e){t(n-1,a.filter((function(t){return t!==e})),r.concat(e))}))};t(this.n,[0,1,2,3,4,5,6,7,8,9],[])}},{key:"guess",value:function(){if(0===this.pool.length)throw new Error("pool_empty");var e=this.pool[Math.floor(Math.random()*this.pool.length)];return this.history.push(e),e}},{key:"applyAB",value:function(e){for(var t=e.a,n=e.b,a=[],r=0;r<=this.pool.length-1;r++){var s=x(this.history[this.history.length-1],this.pool[r]);s.a===t&&s.b===n&&a.push(this.pool[r])}this.pool=a,console.log({poolLength:this.pool.length})}},{key:"generateShare",value:function(){var e=this,t="nAnB Questioner!\n";return t+="~".concat(this.history.length," Round~\n"),this.history.forEach((function(n){var a=x(n,e.history[e.history.length-1]),r=a.pattern,s="";s=r.replace(/-/g,"⬜"),s=s.replace(/B/g,"🟨"),s=s.replace(/A/g,"🟩"),t+="".concat(s,"\n")})),t}}]),e}(),S=(n("fb6a"),function(){function e(t){Object(k["a"])(this,e),this.n=t;for(var n=[],a=0;a<=9;a++)n.push("".concat(a));for(var r=9;r>=0;r-=1){var s=Math.floor(Math.random()*(r+1)),c=[n[s],n[r]];n[r]=c[0],n[s]=c[1]}this.ans=n.slice(0,t).join(""),this.history=[]}return Object(m["a"])(e,[{key:"onGuess",value:function(e){var t=x(e,this.ans),n=t.a,a=t.b,r=t.pattern;return this.history.push(r),{a:n,b:a}}},{key:"generateShare",value:function(){var e="nAnB Guesser!\n";return e+="~".concat(this.history.length," Round~\n"),this.history.forEach((function(t){var n="";n=t.replace(/-/g,"⬜"),n=n.replace(/B/g,"🟨"),n=n.replace(/A/g,"🟩"),e+="".concat(n,"\n")})),e}}]),e}()),A=function(){function e(){Object(k["a"])(this,e)}return Object(m["a"])(e,null,[{key:"int",value:function(){return function(e){return parseInt(e)}}},{key:"cut",value:function(e){return function(t){return t.substring(0,e)}}},{key:"ab",value:function(){return function(e){return{a:parseInt(e[0]),b:parseInt(e[2])}}}}]),e}(),B=function(){function e(){Object(k["a"])(this,e)}return Object(m["a"])(e,null,[{key:"range",value:function(e,t){return function(n){var a=parseInt(n);return!isNaN(a)&&a>=e&&a<=t}}},{key:"nAnBAnswer",value:function(e,t){return function(n){var a=n.substring(0,e);return t?n.length===e&&/^\d+$/.test(a):n.length===e&&/^\d+$/.test(a)&&!/(.).*\1/.test(a)}}},{key:"nAnBab",value:function(e){return function(t){var n={a:parseInt(t[0]),b:parseInt(t[2])};return t.length<=4&&("A"===t[1].toLowerCase()||"a"===t[1].toLowerCase()||" "===t[1])&&(!t[3]||"B"===t[3].toLowerCase()||"b"===t[3].toLowerCase())&&!isNaN(n.a)&&!isNaN(n.b)&&n.a+n.b<=e}}}]),e}(),M=y["a"].global.t,C=function(){function e(t){var n=this;Object(k["a"])(this,e),Object(w["a"])(this,"echoStep",Object(d["a"])(Object(g["a"])().mark((function e(){var t;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.echoFirst){e.next=4;break}return e.next=3,n.speak(M("echo_hello"));case 3:n.echoFirst=!1;case 4:return e.next=6,n.read();case 6:return t=e.sent,e.next=9,n.speak(t);case 9:n.run(n.echoStep);case 10:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"safariNoticeStep",Object(d["a"])(Object(g["a"])().mark((function e(){return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||localStorage.getItem("safari_notice")){e.next=4;break}return e.next=3,n.speakRange("safari_notice",2);case 3:localStorage.setItem("safari_notice",!0);case 4:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"menuStep",Object(d["a"])(Object(g["a"])().mark((function e(){var t;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.run(n.safariNoticeStep);case 2:return e.next=4,n.speakRange("menu_intro",5);case 4:return e.next=6,n.read(A.int(),B.range(1,4));case 6:t=e.sent,e.t0=t,e.next=1===e.t0?10:2===e.t0?12:3===e.t0?14:4===e.t0?16:17;break;case 10:return n.run(n.nAnBGuesserStep),e.abrupt("break",17);case 12:return n.run(n.nAnBQuestionerStep),e.abrupt("break",17);case 14:return n.run(n.tutorialStep),e.abrupt("break",17);case 16:n.run(n.localeStep);case 17:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"nAnBGuesserStep",Object(d["a"])(Object(g["a"])().mark((function e(){var t,a,r,s,c;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=5,e.next=3,n.speak(M("nanb_guesser_intro",{count:t}));case 3:a=new S(t),console.log({ans:a.ans});case 5:return e.next=7,n.read(A.cut(t),B.nAnBAnswer(t,!1));case 7:if(s=e.sent,r=a.onGuess(s),r.a!==t){e.next=11;break}return e.abrupt("break",14);case 11:return e.next=13,n.speakRandom("nanb_guesser_ab",r,3);case 13:if(r.a!==t){e.next=5;break}case 14:return e.prev=14,e.next=17,navigator.clipboard.writeText(a.generateShare());case 17:c=M("saved_to_clipboard"),e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](14),console.log(e.t0),c=M("unsaved_to_clipboard");case 24:return e.next=26,n.speak(M("you_win"));case 26:return e.next=28,n.speak(c);case 28:n.run(n.menuStep);case 29:case"end":return e.stop()}}),e,null,[[14,20]])})))),Object(w["a"])(this,"nAnBQuestionerStep",Object(d["a"])(Object(g["a"])().mark((function e(){var t,a,r,s,c;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=5,a=new _(t),e.prev=2;case 3:return s=a.guess(),e.next=6,n.speakRandom("nanb_questioner_guess",{guess:s},3);case 6:return e.next=8,n.read(A.ab(),B.nAnBab(t));case 8:r=e.sent,a.applyAB(r);case 10:if(r.a!==t){e.next=3;break}case 11:return e.prev=11,e.next=14,navigator.clipboard.writeText(a.generateShare());case 14:c=M("saved_to_clipboard"),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](11),console.log(e.t0),c=M("unsaved_to_clipboard");case 21:return e.next=23,n.speak(M("i_win"));case 23:return e.next=25,n.speak(c);case 25:e.next=35;break;case 27:if(e.prev=27,e.t1=e["catch"](2),"pool_empty"!==e.t1.message){e.next=34;break}return e.next=32,n.speak(M("nanb_questioner_pool_empty"));case 32:e.next=35;break;case 34:throw e.t1;case 35:n.run(n.menuStep);case 36:case"end":return e.stop()}}),e,null,[[2,27],[11,17]])})))),Object(w["a"])(this,"tutorialStep",Object(d["a"])(Object(g["a"])().mark((function e(){return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.speakRange("tutorial",7);case 2:n.run(n.menuStep);case 3:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"localeStep",Object(d["a"])(Object(g["a"])().mark((function e(){var t;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.speak("1. 繁體中文");case 2:return e.next=4,n.speak("2. English");case 4:return e.next=6,n.speak("3. 日本語");case 6:return e.next=8,n.speak(M("enter_the_number"));case 8:return e.next=10,n.read(A.int(),B.range(1,3));case 10:t=e.sent,e.t0=t,e.next=1===e.t0?14:2===e.t0?16:3===e.t0?18:20;break;case 14:return y["a"].global.locale.value="zh_TW",e.abrupt("break",20);case 16:return y["a"].global.locale.value="en_US",e.abrupt("break",20);case 18:return y["a"].global.locale.value="ja_JP",e.abrupt("break",20);case 20:n.run(n.menuStep);case 21:case"end":return e.stop()}}),e)})))),this.chatInstance=t,this.inputParser=function(e){return e},this.inputValidator=function(){return!0},this.readResolver=function(){},this.wrongCount=0,this.echoFirst=!0,localStorage.getItem("locale")?this.run(this.menuStep):this.run(this.localeStep)}return Object(m["a"])(e,[{key:"speak",value:function(){var t=Object(d["a"])(Object(g["a"])().mark((function t(n){return Object(g["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait(400);case 2:return this.chatInstance.markWriting(!0),t.next=5,e.wait(1500);case 5:this.chatInstance.newMessage("bot",n),this.chatInstance.markWriting(!1);case 7:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"speakRange",value:function(){var e=Object(d["a"])(Object(g["a"])().mark((function e(t,n){var a;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<=n)){e.next=7;break}return e.next=4,this.speak(M("".concat(t,"_").concat(a)));case 4:a++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"speakRandom",value:function(){var e=Object(d["a"])(Object(g["a"])().mark((function e(t,n,a){var r;return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Math.floor(Math.random()*a),e.next=3,this.speak(M("".concat(t,"_").concat(r),n));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"read",value:function(e,t){var n=this;return new Promise((function(a){n.inputParser=null!==e&&void 0!==e?e:function(e){return e},n.inputValidator=null!==t&&void 0!==t?t:function(){return!0},n.readResolver=a}))}},{key:"input",value:function(e){if(this.chatInstance.newMessage("user",e),!(this.wrongCount>=5))if(this.inputValidator(e)){var t=this.inputParser(e);this.readResolver(t),this.readResolver=function(){}}else this.speakRandom("input_validate_failed",{},3),this.wrongCount++,this.wrongCount>=5&&(this.speak(M("leave")),this.readResolver=function(){})}},{key:"run",value:function(){var e=Object(d["a"])(Object(g["a"])().mark((function e(t){return Object(g["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:this.chatInstance.markSection();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"wait",value:function(e){return new Promise((function(t){setTimeout(t,e)}))}}]),e}();function I(e){return new C(e)}var $={name:"Chat",setup:function(e){var t=Object(a["y"])(null),n=Object(a["y"])(null);return Object(a["t"])((function(){n.value=I(t.value)})),function(e,r){return Object(a["G"])((Object(a["v"])(),Object(a["e"])(O,{ref_key:"chat",ref:t,onUserMessage:r[0]||(r[0]=function(e){return Object(a["D"])(n).input(e)})},null,512)),[[a["E"],Object(a["D"])(n)]])}}};const R=$;t["default"]=R},"437f":function(e,t,n){"use strict";var a=n("7086"),r=n.n(a);n.d(t,"default",(function(){return r.a}))},7086:function(e,t,n){e.exports={container:"_3911bEkh",left:"_2-tWAnw-",right:"MrIxSjHD",message:"_3M5B-_qB",img:"n4820IVp"}},"710a":function(e,t,n){var a={"./bot.jpg":"9780","./user.jpg":"18d5"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="710a"},8464:function(e,t,n){e.exports={container:"_2oWvMXBm",new:"_10T9U4NM",message:"_17E9xSel",controls:"_3UGpGxY5",writing:"_8OtNO1pn",input:"_1MfgGU6r",btn:"_3nHIodv-"}},9550:function(e,t,n){"use strict";var a=n("8464"),r=n.n(a);n.d(t,"default",(function(){return r.a}))},9780:function(e,t,n){e.exports=n.p+"static/img/bot.31c65887.jpg"}}]);