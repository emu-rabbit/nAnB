(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b6ac66e"],{"18d5":function(e,t,n){e.exports=n.p+"static/img/user.1ad76388.jpg"},"293a":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=n("47e2"),c=["src"],s={name:"Message",props:{from:{type:String,default:"bot"},messages:{type:Array,required:!0}},setup:function(e){var t=Object(a["b"])(),s=t.t;return function(t,a){return Object(r["u"])(),Object(r["f"])("div",{class:Object(r["o"])(t.$style.container)},[Object(r["g"])("div",{class:Object(r["o"])(t.$style.left)},[Object(r["g"])("img",{class:Object(r["o"])(t.$style.img),src:n("710a")("./".concat(e.from,".jpg"))},null,10,c)],2),Object(r["g"])("div",{class:Object(r["o"])(t.$style.right)},[Object(r["g"])("div",null,Object(r["B"])(Object(r["C"])(s)("".concat(e.from,"_name"))),1),(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(e.messages,(function(e,n){return Object(r["u"])(),Object(r["f"])("div",{class:Object(r["o"])(t.$style.message),key:n},Object(r["B"])(e),3)})),128))],2)],2)}}},u=n("437f"),i=n("6b0d"),o=n.n(i);const b={};b["$style"]=u["default"];const f=o()(s,[["__cssModules",b]]);var l=f,j={name:"ChatBox",emits:["user-message"],setup:function(e,t){var n=t.expose,c=t.emit,s=Object(a["b"])(),u=s.t,i=Object(r["x"])(!1),o=function(){i.value=!0},b=Object(r["w"])([]),f=function(e,t){b[0]&&b[0].from===e&&!i.value?b[0].message.push(t):(b.unshift({from:e,message:[t]}),i.value&&(i.value=!1))},j=Object(r["x"])(!1),p=function(e){j.value=e},O=Object(r["x"])(null),h=function(){O.value&&(c("user-message",O.value.value),O.value.value="")};return n({newMessage:f,markWriting:p,markSection:o}),function(e,t){return Object(r["u"])(),Object(r["f"])("div",{class:Object(r["o"])(e.$style.container)},[Object(r["g"])("div",{class:Object(r["o"])(e.$style.message)},[(Object(r["u"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(b,(function(e,t){return Object(r["u"])(),Object(r["e"])(l,{key:t,from:e.from,messages:e.message},null,8,["from","messages"])})),128))],2),Object(r["g"])("div",{class:Object(r["o"])(e.$style.controls)},[Object(r["g"])("span",{class:Object(r["o"])(e.$style.writing),style:Object(r["p"])({visibility:j.value?"visible":"hidden"})},Object(r["B"])(Object(r["C"])(u)("bot_is_writing")),7),Object(r["g"])("input",{ref_key:"input",ref:O,class:Object(r["o"])(e.$style.input),onKeydown:t[0]||(t[0]=Object(r["G"])((function(e){return h()}),["enter"]))},null,34),Object(r["g"])("button",{class:Object(r["o"])(e.$style.btn),onClick:t[1]||(t[1]=function(e){return h()})},"送出",2)],2)],2)}}},p=n("bded");const O={};O["$style"]=p["default"];const h=o()(j,[["__cssModules",O]]);var v=h,d=n("c7eb"),g=n("1da1"),m=n("d4ec"),k=n("bee2"),w=n("ade3"),x=(n("99af"),n("d3b7"),n("9225")),y=(n("a15b"),n("fb6a"),function(){function e(t){Object(m["a"])(this,e),this.n=t;for(var n=[],r=0;r<=9;r++)n.push("".concat(r));for(var a=9;a>=0;a-=1){var c=Math.floor(Math.random()*(a+1)),s=[n[c],n[a]];n[a]=s[0],n[c]=s[1]}this.ans=n.slice(0,t).join("")}return Object(k["a"])(e,[{key:"judge",value:function(e){for(var t=0,n=0,r=0;r<=this.n-1;r++)-1!==e.indexOf(this.ans[r])&&n++;for(var a=0;a<=this.n-1;a++)e[a]===this.ans[a]&&(t++,n--);return{a:t,b:n}}}]),e}()),_=function(){function e(){Object(m["a"])(this,e)}return Object(k["a"])(e,null,[{key:"int",value:function(){return function(e){return parseInt(e)}}},{key:"cut",value:function(e){return function(t){return t.substring(0,e)}}}]),e}(),S=(n("ac1f"),n("00b4"),function(){function e(){Object(m["a"])(this,e)}return Object(k["a"])(e,null,[{key:"range",value:function(e,t){return function(n){var r=parseInt(n);return!isNaN(r)&&r>=e&&r<=t}}},{key:"nAnBAnswer",value:function(e,t){return function(n){var r=n.substring(0,e);return t?/^\d+$/.test(r):/^\d+$/.test(r)&&!/(.).*\1/.test(r)}}}]),e}()),$=x["a"].global.t,B=function(){function e(t){var n=this;Object(m["a"])(this,e),Object(w["a"])(this,"echoStep",Object(g["a"])(Object(d["a"])().mark((function e(){var t;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.echoFirst){e.next=4;break}return e.next=3,n.speak($("echo_hello"));case 3:n.echoFirst=!1;case 4:return e.next=6,n.read();case 6:return t=e.sent,e.next=9,n.speak(t);case 9:n.run(n.echoStep);case 10:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"menuStep",Object(g["a"])(Object(d["a"])().mark((function e(){var t;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.speakRange("menu_intro",3);case 2:return e.next=4,n.read(_.int(),S.range(1,2));case 4:t=e.sent,e.t0=t,e.next=1===e.t0?8:2===e.t0?10:12;break;case 8:return n.run(n.nAnBGuesserStep),e.abrupt("break",12);case 10:return n.run(n.nAnBQuestionerStep),e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"nAnBGuesserStep",Object(g["a"])(Object(d["a"])().mark((function e(){var t,r,a,c;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=5,e.next=3,n.speak($("nanb_guesser_intro",{count:t}));case 3:r=new y(t),console.log({ans:r.ans});case 5:return e.next=7,n.read(_.cut(t),S.nAnBAnswer(t,!1));case 7:return c=e.sent,a=r.judge(c),e.next=11,n.speak("".concat(a.a,"A").concat(a.b,"B"));case 11:if(a.a!==t){e.next=5;break}case 12:return e.next=14,n.speak($("you_win"));case 14:n.run(n.menuStep);case 15:case"end":return e.stop()}}),e)})))),Object(w["a"])(this,"nAnBQuestionerStep",Object(g["a"])(Object(d["a"])().mark((function e(){return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.speak($("under_dev"));case 2:n.run(n.menuStep);case 3:case"end":return e.stop()}}),e)})))),this.chatInstance=t,this.inputParser=function(e){return e},this.inputValidator=function(){return!0},this.readResolver=function(){},this.wrongCount=0,this.echoFirst=!0,this.run(this.menuStep)}return Object(k["a"])(e,[{key:"speak",value:function(){var t=Object(g["a"])(Object(d["a"])().mark((function t(n){return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.wait(400);case 2:return this.chatInstance.markWriting(!0),t.next=5,e.wait(1500);case 5:this.chatInstance.newMessage("bot",n),this.chatInstance.markWriting(!1);case 7:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"speakRange",value:function(){var e=Object(g["a"])(Object(d["a"])().mark((function e(t,n){var r;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<=n)){e.next=7;break}return e.next=4,this.speak($("".concat(t,"_").concat(r)));case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"read",value:function(e,t){var n=this;return new Promise((function(r){n.inputParser=null!==e&&void 0!==e?e:function(e){return e},n.inputValidator=null!==t&&void 0!==t?t:function(){return!0},n.readResolver=r}))}},{key:"input",value:function(e){if(this.chatInstance.newMessage("user",e),!(this.wrongCount>=5))if(this.inputValidator(e)){var t=this.inputParser(e);this.readResolver(t),this.readResolver=function(){}}else this.speak($("input_validate_failed")),this.wrongCount++,this.wrongCount>=5&&(this.speak($("leave")),this.readResolver=function(){})}},{key:"run",value:function(){var e=Object(g["a"])(Object(d["a"])().mark((function e(t){return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:this.chatInstance.markSection();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"wait",value:function(e){return new Promise((function(t){setTimeout(t,e)}))}}]),e}();function M(e){return new B(e)}var C={name:"Chat",setup:function(e){var t=Object(r["x"])(null),n=Object(r["x"])(null);return Object(r["s"])((function(){n.value=M(t.value)})),function(e,a){return Object(r["F"])((Object(r["u"])(),Object(r["e"])(v,{ref_key:"chat",ref:t,onUserMessage:a[0]||(a[0]=function(e){return Object(r["C"])(n).input(e)})},null,512)),[[r["D"],Object(r["C"])(n)]])}}};const A=C;t["default"]=A},"2e2d":function(e,t,n){e.exports={container:"_2oWvMXBm",message:"_17E9xSel",controls:"_3UGpGxY5",writing:"_8OtNO1pn",input:"_1MfgGU6r",btn:"_3nHIodv-"}},"437f":function(e,t,n){"use strict";var r=n("7086"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},7086:function(e,t,n){e.exports={container:"_3911bEkh",left:"_2-tWAnw-",right:"MrIxSjHD",message:"_3M5B-_qB",img:"n4820IVp"}},"710a":function(e,t,n){var r={"./bot.jpg":"9780","./user.jpg":"18d5"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="710a"},9780:function(e,t,n){e.exports=n.p+"static/img/bot.31c65887.jpg"},bded:function(e,t,n){"use strict";var r=n("2e2d"),a=n.n(r);n.d(t,"default",(function(){return a.a}))}}]);